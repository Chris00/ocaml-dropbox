<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dropbox_lwt_unix (dropbox_lwt_unix.Dropbox_lwt_unix)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">dropbox_lwt_unix</a> &#x00BB; Dropbox_lwt_unix</nav><h1>Module <code>Dropbox_lwt_unix</code></h1></header><div><div class="spec include"><div class="doc"><p>Implementation of <a href="../../dropbox/Dropbox/module-type-S/index.html"><code>Dropbox.S</code></a> using <code>Cohttp_lwt_unix.Client</code>.</p><details open="open"><summary><span class="def"><code><span class="keyword">include</span> <a href="../../dropbox/Dropbox/index.html#module-type-S">Dropbox.S</a></code></span></summary><dl><dt class="spec module" id="module-OAuth2"><a href="#module-OAuth2" class="anchor"></a><code><span class="keyword">module</span> <a href="OAuth2/index.html">OAuth2</a> : <span class="keyword">sig</span> ... <span class="keyword">end</span></code></dt><dd><p><a href="http://oauth.net/">OAuth 2.0</a> authentication.</p></dd></dl><dl><dt class="spec type" id="type-t"><a href="#type-t" class="anchor"></a><code><span class="keyword">type</span> t</code></dt><dd><p>Represent a session communicating with Dropbox.</p></dd></dl><dl><dt class="spec value" id="val-session"><a href="#val-session" class="anchor"></a><code><span class="keyword">val</span> session : <a href="OAuth2/index.html#type-token">OAuth2.token</a> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a></code></dt><dt class="spec value" id="val-token"><a href="#val-token" class="anchor"></a><code><span class="keyword">val</span> token : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <a href="OAuth2/index.html#type-token">OAuth2.token</a></code></dt><dd><p>The token of the current session.</p></dd></dl><dl><dt class="spec type" id="type-name_details"><a href="#type-name_details" class="anchor"></a><code><span class="keyword">type</span> name_details</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-name_details">Dropbox_t.name_details</a></code><code> = </code><code>{</code><table class="record"><tr id="type-name_details.familiar_name" class="anchored"><td class="def field"><a href="#type-name_details.familiar_name" class="anchor"></a><code>familiar_name : string;</code></td><td class="doc"><p>The locale-dependent familiar name for the user.</p></td></tr><tr id="type-name_details.given_name" class="anchored"><td class="def field"><a href="#type-name_details.given_name" class="anchor"></a><code>given_name : string;</code></td><td class="doc"><p>The user's given name.</p></td></tr><tr id="type-name_details.surname" class="anchored"><td class="def field"><a href="#type-name_details.surname" class="anchor"></a><code>surname : string;</code></td><td class="doc"><p>The user's surname.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-team"><a href="#type-team" class="anchor"></a><code><span class="keyword">type</span> team</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-team">Dropbox_t.team</a></code><code> = </code><code>{</code><table class="record"><tr id="type-team.name" class="anchored"><td class="def field"><a href="#type-team.name" class="anchor"></a><code>name : string;</code></td><td class="doc"><p>The name of the team the user belongs to.</p></td></tr><tr id="type-team.team_id" class="anchored"><td class="def field"><a href="#type-team.team_id" class="anchor"></a><code>team_id : int;</code></td><td class="doc"><p>The ID of the team the user belongs to.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-quota_info"><a href="#type-quota_info" class="anchor"></a><code><span class="keyword">type</span> quota_info</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-quota_info">Dropbox_t.quota_info</a></code><code> = </code><code>{</code><table class="record"><tr id="type-quota_info.shared" class="anchored"><td class="def field"><a href="#type-quota_info.shared" class="anchor"></a><code>shared : int;</code></td><td class="doc"><p>The user's used quota outside of shared folders (bytes).</p></td></tr><tr id="type-quota_info.quota" class="anchored"><td class="def field"><a href="#type-quota_info.quota" class="anchor"></a><code>quota : int;</code></td><td class="doc"><p>The user's used quota in shared folders (bytes).</p></td></tr><tr id="type-quota_info.normal" class="anchored"><td class="def field"><a href="#type-quota_info.normal" class="anchor"></a><code>normal : int;</code></td><td class="doc"><p>The user's total quota allocation (bytes).</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-info"><a href="#type-info" class="anchor"></a><code><span class="keyword">type</span> info</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-info">Dropbox_t.info</a></code><code> = </code><code>{</code><table class="record"><tr id="type-info.uid" class="anchored"><td class="def field"><a href="#type-info.uid" class="anchor"></a><code>uid : int;</code></td><td class="doc"><p>The user's unique Dropbox ID.</p></td></tr><tr id="type-info.display_name" class="anchored"><td class="def field"><a href="#type-info.display_name" class="anchor"></a><code>display_name : string;</code></td><td class="doc"><p>The user's display name.</p></td></tr><tr id="type-info.email_verified" class="anchored"><td class="def field"><a href="#type-info.email_verified" class="anchor"></a><code>email_verified : bool;</code></td></tr><tr id="type-info.name_details" class="anchored"><td class="def field"><a href="#type-info.name_details" class="anchor"></a><code>name_details : <a href="index.html#type-name_details">name_details</a>;</code></td></tr><tr id="type-info.referral_link" class="anchored"><td class="def field"><a href="#type-info.referral_link" class="anchor"></a><code>referral_link : Uri.t;</code></td><td class="doc"><p>The user's <a href="https://www.dropbox.com/referrals">referral link</a>.</p></td></tr><tr id="type-info.country" class="anchored"><td class="def field"><a href="#type-info.country" class="anchor"></a><code>country : string;</code></td><td class="doc"><p>The user's two-letter country code, if available.</p></td></tr><tr id="type-info.locale" class="anchored"><td class="def field"><a href="#type-info.locale" class="anchor"></a><code>locale : string;</code></td><td class="doc"><p>Locale preference set by the user (e.g. en-us).</p></td></tr><tr id="type-info.is_paired" class="anchored"><td class="def field"><a href="#type-info.is_paired" class="anchor"></a><code>is_paired : bool;</code></td><td class="doc"><p>If true, there is a paired account associated with this user.</p></td></tr><tr id="type-info.team" class="anchored"><td class="def field"><a href="#type-info.team" class="anchor"></a><code>team : <span><a href="index.html#type-team">team</a> option</span>;</code></td><td class="doc"><p>If the user belongs to a team, contains team information.</p></td></tr><tr id="type-info.quota_info" class="anchored"><td class="def field"><a href="#type-info.quota_info" class="anchor"></a><code>quota_info : <a href="index.html#type-quota_info">quota_info</a>;</code></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-info"><a href="#val-info" class="anchor"></a><code><span class="keyword">val</span> info : <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-info">info</a> Lwt.t</span></code></dt><dd><p><code>info t</code> return the information about the user's account.</p><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-photo_info"><a href="#type-photo_info" class="anchor"></a><code><span class="keyword">type</span> photo_info</code><code> = <a href="../../dropbox/Dropbox_json/Photo/index.html#type-info">Dropbox_json.Photo.info</a></code><code> = </code><code>{</code><table class="record"><tr id="type-photo_info.time_taken" class="anchored"><td class="def field"><a href="#type-photo_info.time_taken" class="anchor"></a><code>time_taken : <span><a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a> option</span>;</code></td><td class="doc"><p>The creation time of the photo</p></td></tr><tr id="type-photo_info.lat_long" class="anchored"><td class="def field"><a href="#type-photo_info.lat_long" class="anchor"></a><code>lat_long : <span><span>(float * float)</span> option</span>;</code></td><td class="doc"><p>The GPS coordinates of the photo, if any.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-video_info"><a href="#type-video_info" class="anchor"></a><code><span class="keyword">type</span> video_info</code><code> = <a href="../../dropbox/Dropbox_json/Video/index.html#type-info">Dropbox_json.Video.info</a></code><code> = </code><code>{</code><table class="record"><tr id="type-video_info.time_taken" class="anchored"><td class="def field"><a href="#type-video_info.time_taken" class="anchor"></a><code>time_taken : <span><a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a> option</span>;</code></td><td class="doc"><p>The creation time of the video</p></td></tr><tr id="type-video_info.duration" class="anchored"><td class="def field"><a href="#type-video_info.duration" class="anchor"></a><code>duration : <span>float option</span>;</code></td><td class="doc"><p>The video length in ms</p></td></tr><tr id="type-video_info.lat_long" class="anchored"><td class="def field"><a href="#type-video_info.lat_long" class="anchor"></a><code>lat_long : <span><span>(float * float)</span> option</span>;</code></td><td class="doc"><p>The GPS coordinates of the video, if any.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-user"><a href="#type-user" class="anchor"></a><code><span class="keyword">type</span> user</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-user">Dropbox_t.user</a></code><code> = </code><code>{</code><table class="record"><tr id="type-user.uid" class="anchored"><td class="def field"><a href="#type-user.uid" class="anchor"></a><code>uid : int;</code></td><td class="doc"><p>The user's unique Dropbox ID</p></td></tr><tr id="type-user.display_name" class="anchored"><td class="def field"><a href="#type-user.display_name" class="anchor"></a><code>display_name : string;</code></td><td class="doc"><p>The name of the user</p></td></tr><tr id="type-user.same_team" class="anchored"><td class="def field"><a href="#type-user.same_team" class="anchor"></a><code>same_team : bool;</code></td><td class="doc"><p>Whether the user is on the same team as the linked account</p></td></tr><tr id="type-user.member_id" class="anchored"><td class="def field"><a href="#type-user.member_id" class="anchor"></a><code>member_id : string;</code></td><td class="doc"><p>If this endpoint is called by a Dropbox for Business app and the user is on that team, a member_id field will also be present</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-user_info"><a href="#type-user_info" class="anchor"></a><code><span class="keyword">type</span> user_info</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-user_info">Dropbox_t.user_info</a></code><code> = </code><code>{</code><table class="record"><tr id="type-user_info.user" class="anchored"><td class="def field"><a href="#type-user_info.user" class="anchor"></a><code>user : <a href="index.html#type-user">user</a>;</code></td></tr><tr id="type-user_info.access_type" class="anchored"><td class="def field"><a href="#type-user_info.access_type" class="anchor"></a><code>access_type : string;</code></td></tr><tr id="type-user_info.active" class="anchored"><td class="def field"><a href="#type-user_info.active" class="anchor"></a><code>active : bool;</code></td><td class="doc"><p>Whether the user is active in a shared folder</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-group"><a href="#type-group" class="anchor"></a><code><span class="keyword">type</span> group</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-group">Dropbox_t.group</a></code><code> = </code><code>{</code><table class="record"><tr id="type-group.group_name" class="anchored"><td class="def field"><a href="#type-group.group_name" class="anchor"></a><code>group_name : string;</code></td></tr><tr id="type-group.group_id" class="anchored"><td class="def field"><a href="#type-group.group_id" class="anchor"></a><code>group_id : string;</code></td></tr><tr id="type-group.num_members" class="anchored"><td class="def field"><a href="#type-group.num_members" class="anchor"></a><code>num_members : int;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-shared_folder"><a href="#type-shared_folder" class="anchor"></a><code><span class="keyword">type</span> shared_folder</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-shared_folder">Dropbox_t.shared_folder</a></code><code> = </code><code>{</code><table class="record"><tr id="type-shared_folder.shared_folder_id" class="anchored"><td class="def field"><a href="#type-shared_folder.shared_folder_id" class="anchor"></a><code>shared_folder_id : string;</code></td></tr><tr id="type-shared_folder.shared_folder_name" class="anchored"><td class="def field"><a href="#type-shared_folder.shared_folder_name" class="anchor"></a><code>shared_folder_name : string;</code></td></tr><tr id="type-shared_folder.path" class="anchored"><td class="def field"><a href="#type-shared_folder.path" class="anchor"></a><code>path : string;</code></td></tr><tr id="type-shared_folder.access_type" class="anchored"><td class="def field"><a href="#type-shared_folder.access_type" class="anchor"></a><code>access_type : string;</code></td></tr><tr id="type-shared_folder.shared_link_policy" class="anchored"><td class="def field"><a href="#type-shared_folder.shared_link_policy" class="anchor"></a><code>shared_link_policy : string;</code></td></tr><tr id="type-shared_folder.owner" class="anchored"><td class="def field"><a href="#type-shared_folder.owner" class="anchor"></a><code>owner : <span><a href="index.html#type-user">user</a> option</span>;</code></td></tr><tr id="type-shared_folder.membership" class="anchored"><td class="def field"><a href="#type-shared_folder.membership" class="anchor"></a><code>membership : <span><a href="index.html#type-user_info">user_info</a> list</span>;</code></td><td class="doc"><p>The membership field only contains users who have joined the shared folder and does not include users who have been invited but have not accepted. When the active field is <code>false</code>, it means that a user has left a shared folder (but may still rejoin).</p></td></tr><tr id="type-shared_folder.groups" class="anchored"><td class="def field"><a href="#type-shared_folder.groups" class="anchor"></a><code>groups : <span><a href="index.html#type-group">group</a> list</span>;</code></td></tr></table><code>}</code></dt><dt class="spec type" id="type-metadata"><a href="#type-metadata" class="anchor"></a><code><span class="keyword">type</span> metadata</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-metadata">Dropbox_t.metadata</a></code><code> = </code><code>{</code><table class="record"><tr id="type-metadata.size" class="anchored"><td class="def field"><a href="#type-metadata.size" class="anchor"></a><code>size : string;</code></td><td class="doc"><p>A human-readable description of the file size (translated by locale).</p></td></tr><tr id="type-metadata.bytes" class="anchored"><td class="def field"><a href="#type-metadata.bytes" class="anchor"></a><code>bytes : int;</code></td><td class="doc"><p>The file size in bytes.</p></td></tr><tr id="type-metadata.mime_type" class="anchored"><td class="def field"><a href="#type-metadata.mime_type" class="anchor"></a><code>mime_type : string;</code></td></tr><tr id="type-metadata.path" class="anchored"><td class="def field"><a href="#type-metadata.path" class="anchor"></a><code>path : string;</code></td><td class="doc"><p>The canonical path to the file or folder.</p></td></tr><tr id="type-metadata.is_dir" class="anchored"><td class="def field"><a href="#type-metadata.is_dir" class="anchor"></a><code>is_dir : bool;</code></td><td class="doc"><p>Whether the given entry is a folder or not.</p></td></tr><tr id="type-metadata.is_deleted" class="anchored"><td class="def field"><a href="#type-metadata.is_deleted" class="anchor"></a><code>is_deleted : bool;</code></td><td class="doc"><p>Whether the given entry is deleted. (Only interesting if deleted files are returned.)</p></td></tr><tr id="type-metadata.rev" class="anchored"><td class="def field"><a href="#type-metadata.rev" class="anchor"></a><code>rev : string;</code></td><td class="doc"><p>A unique identifier for the current revision of a file. This field is the same <code>rev</code> as elsewhere in the API and can be used to detect changes and avoid conflicts.</p></td></tr><tr id="type-metadata.hash" class="anchored"><td class="def field"><a href="#type-metadata.hash" class="anchor"></a><code>hash : string;</code></td><td class="doc"><p>A folder's hash is useful for indicating changes to the folder's contents in later calls to <a href="index.html#type-metadata"><code>metadata</code></a>. This is roughly the folder equivalent to a file's <code>rev</code>. (Is <code>&quot;&quot;</code> for a file.)</p></td></tr><tr id="type-metadata.thumb_exists" class="anchored"><td class="def field"><a href="#type-metadata.thumb_exists" class="anchor"></a><code>thumb_exists : bool;</code></td><td class="doc"><p>True if the file is an image that can be converted to a thumbnail via the <a href="index.html#val-thumbnails"><code>thumbnails</code></a> call.</p></td></tr><tr id="type-metadata.photo_info" class="anchored"><td class="def field"><a href="#type-metadata.photo_info" class="anchor"></a><code>photo_info : <span>[ `None <span>| `Pending</span> <span><span>| `Some</span> of <a href="index.html#type-photo_info">photo_info</a></span> ]</span>;</code></td><td class="doc"><p>Only returned when the include_media_info parameter is true and the file is an image. A dictionary that includes the creation time (time_taken) and the GPS coordinates (lat_long).</p></td></tr><tr id="type-metadata.video_info" class="anchored"><td class="def field"><a href="#type-metadata.video_info" class="anchor"></a><code>video_info : <span>[ `None <span>| `Pending</span> <span><span>| `Some</span> of <a href="index.html#type-video_info">video_info</a></span> ]</span>;</code></td><td class="doc"><p>Only returned when the include_media_info parameter is true and the file is a video. A dictionary that includes the creation time (time_taken), the GPS coordinates (lat_long), and the length of the video in milliseconds (duration).</p></td></tr><tr id="type-metadata.icon" class="anchored"><td class="def field"><a href="#type-metadata.icon" class="anchor"></a><code>icon : string;</code></td><td class="doc"><p>The name of the icon used to illustrate the file type in Dropbox's <a href="https://www.dropbox.com/static/images/dropbox-api-icons.zip">icon library</a>.</p></td></tr><tr id="type-metadata.modified" class="anchored"><td class="def field"><a href="#type-metadata.modified" class="anchor"></a><code>modified : <span><a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a> option</span>;</code></td><td class="doc"><p>The last time the file was modified on Dropbox (not included for the root folder).</p></td></tr><tr id="type-metadata.client_mtime" class="anchored"><td class="def field"><a href="#type-metadata.client_mtime" class="anchor"></a><code>client_mtime : <span><a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a> option</span>;</code></td><td class="doc"><p>For files, this is the modification time set by the desktop client when the file was added to Dropbox. Since this time is not verified (the Dropbox server stores whatever the desktop client sends up), this should only be used for display purposes (such as sorting) and not, for example, to determine if a file has changed or not.</p></td></tr><tr id="type-metadata.root" class="anchored"><td class="def field"><a href="#type-metadata.root" class="anchor"></a><code>root : <span>[ `Dropbox <span>| `App_folder</span> ]</span>;</code></td><td class="doc"><p>The root or top-level folder depending on your access level. All paths returned are relative to this root level.</p></td></tr><tr id="type-metadata.contents" class="anchored"><td class="def field"><a href="#type-metadata.contents" class="anchor"></a><code>contents : <span><a href="index.html#type-metadata">metadata</a> list</span>;</code></td><td class="doc"><p>For folders, contents is the list of the metadata of the files contained in this folder. Return nothing if the folder is empty.</p></td></tr><tr id="type-metadata.shared_folder" class="anchored"><td class="def field"><a href="#type-metadata.shared_folder" class="anchor"></a><code>shared_folder : <span><a href="index.html#type-shared_folder">shared_folder</a> option</span>;</code></td><td class="doc"><p>This field will be included for shared folders. See <code>shared_folder</code> for a sample shared folder response.</p></td></tr><tr id="type-metadata.read_only" class="anchored"><td class="def field"><a href="#type-metadata.read_only" class="anchor"></a><code>read_only : bool;</code></td><td class="doc"><p>For shared folders, this field specifies whether the user has read-only access to the folder. For files within a shared folder, this specifies the read-only status of the parent shared folder.</p></td></tr><tr id="type-metadata.parent_shared_folder_id" class="anchored"><td class="def field"><a href="#type-metadata.parent_shared_folder_id" class="anchor"></a><code>parent_shared_folder_id : int;</code></td><td class="doc"><p>For files within a shared folder, this field specifies the ID of the containing shared folder.</p></td></tr><tr id="type-metadata.modifier" class="anchored"><td class="def field"><a href="#type-metadata.modifier" class="anchor"></a><code>modifier : <span><a href="index.html#type-user">user</a> option</span>;</code></td><td class="doc"><p>For files within a shared folder, this field specifies which user last modified this file. If the modifying user no longer exists, the value will be null.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-cursor"><a href="#type-cursor" class="anchor"></a><code><span class="keyword">type</span> cursor</code></dt><dt class="spec type" id="type-delta"><a href="#type-delta" class="anchor"></a><code><span class="keyword">type</span> delta</code><code> = </code><code>{</code><table class="record"><tr id="type-delta.entries" class="anchored"><td class="def field"><a href="#type-delta.entries" class="anchor"></a><code>entries : <span><span>(string * <span><a href="index.html#type-metadata">metadata</a> option</span>)</span> list</span>;</code></td><td class="doc"><p>A list of &quot;delta entries&quot;. Each delta entry is a 2-item list of one of the following forms:</p><p><code>(path, Some metadata)</code> - Indicates that there is a file/folder at the given path. You should add the entry to your local state. The metadata value is the same as what would be returned by the <a href="index.html#type-metadata"><code>metadata</code></a> call, except folder metadata doesn't have hash or contents fields. To correctly process delta entries:</p><ul><li>If the new entry includes parent folders that don't yet exist in your local state, create those parent folders in your local state.</li></ul><ul><li>If the new entry is a file, replace whatever your local state has at path with the new entry.</li></ul><ul><li>If the new entry is a folder, check what your local state has at &lt;path&gt;. If it's a file, replace it with the new entry. If it's a folder, apply the new &lt;metadata&gt; to the folder, but don't modify the folder's children. If your local state doesn't yet include this path, create it as a folder.</li></ul><ul><li>If the new entry is a folder with the read-only field set to true, apply the read-only permission recursively to all files within the shared folder.</li></ul><p><code>(path, None)</code> - Indicates that there is no file/folder at the given path. To update your local state to match, anything at path and all its children should be deleted. Deleting a folder in your Dropbox will sometimes send down a single deleted entry for that folder, and sometimes separate entries for the folder and all child paths. If your local state doesn't have anything at path, ignore this entry.</p><p>Note: Dropbox treats file names in a case-insensitive but case-preserving way. To facilitate this, the <code>path</code> values above are lower-cased versions of the actual path. The last path component of the <code>metadata</code> value will be case-preserved.</p></td></tr><tr id="type-delta.reset" class="anchored"><td class="def field"><a href="#type-delta.reset" class="anchor"></a><code>reset : bool;</code></td><td class="doc"><p>If <code>true</code>, clear your local state before processing the delta entries. reset is always true on the initial call to <a href="index.html#type-delta"><code>delta</code></a> (i.e., when no cursor is passed in). Otherwise, it is true in rare situations, such as after server or account maintenance, or if a user deletes their app folder.</p></td></tr><tr id="type-delta.cursor" class="anchored"><td class="def field"><a href="#type-delta.cursor" class="anchor"></a><code>cursor : <a href="index.html#type-cursor">cursor</a>;</code></td><td class="doc"><p>Encodes the latest information that has been returned. On the next call to <a href="index.html#type-delta"><code>delta</code></a>, pass in this value.</p></td></tr><tr id="type-delta.has_more" class="anchored"><td class="def field"><a href="#type-delta.has_more" class="anchor"></a><code>has_more : bool;</code></td><td class="doc"><p>If <code>true</code>, then there are more entries available; you can call <a href="index.html#type-delta"><code>delta</code></a> again immediately to retrieve those entries. If <code>false</code>, then wait for at least five minutes (preferably longer) before checking again.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-longpoll_delta"><a href="#type-longpoll_delta" class="anchor"></a><code><span class="keyword">type</span> longpoll_delta</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-longpoll_delta">Dropbox_t.longpoll_delta</a></code><code> = </code><code>{</code><table class="record"><tr id="type-longpoll_delta.changes" class="anchored"><td class="def field"><a href="#type-longpoll_delta.changes" class="anchor"></a><code>changes : bool;</code></td><td class="doc"><p>Incidate whether new changes are available.</p></td></tr><tr id="type-longpoll_delta.backoff" class="anchored"><td class="def field"><a href="#type-longpoll_delta.backoff" class="anchor"></a><code>backoff : <span>int option</span>;</code></td><td class="doc"><p>If present, it indicates how many seconds your code should wait before calling <a href="index.html#type-longpoll_delta"><code>longpoll_delta</code></a> again.</p></td></tr></table><code>}</code></dt><dt class="spec type" id="type-copy_ref"><a href="#type-copy_ref" class="anchor"></a><code><span class="keyword">type</span> copy_ref</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-copy_ref">Dropbox_t.copy_ref</a></code><code> = </code><code>{</code><table class="record"><tr id="type-copy_ref.copy_ref" class="anchored"><td class="def field"><a href="#type-copy_ref.copy_ref" class="anchor"></a><code>copy_ref : string;</code></td><td class="doc"><p>A reference string to the specified file</p></td></tr><tr id="type-copy_ref.expires" class="anchored"><td class="def field"><a href="#type-copy_ref.expires" class="anchor"></a><code>expires : <a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a>;</code></td><td class="doc"><p>The link's expiration date in Dropbox's usual date format. All links are currently set to expire far enough in the future so that expiration is effectively not an issue.</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-get_file"><a href="#val-get_file" class="anchor"></a><code><span class="keyword">val</span> get_file : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;rev:string</span> <span>&#45;&gt;</span> <span>?&#8288;start:int</span> <span>&#45;&gt;</span> <span>?&#8288;len:int</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-metadata">metadata</a> * <span>string Lwt_stream.t</span>)</span> option</span> Lwt.t</span></code></dt><dd><p><code>get_file t name</code> return the metadata for the file and a stream of its content. <code>None</code> indicates that the file does not exists.</p><dl><dt>parameter start</dt><dd><p>The first byte of the file to download. A negative number is interpreted as <code>0</code>. Default: <code>0</code>.</p></dd></dl><dl><dt>parameter len</dt><dd><p>The number of bytes to download. If <code>start</code> is not set, the last <code>len</code> bytes of the file are downloaded. Default: download the entire file (or everything after the position <code>start</code>, including <code>start</code>). If <code>start &lt;= 0</code>, the metadata will be present but the stream will be empty.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-metadata"><a href="#val-metadata" class="anchor"></a><code><span class="keyword">val</span> metadata : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;file_limit:int</span> <span>&#45;&gt;</span> <span>?&#8288;hash:string</span> <span>&#45;&gt;</span> <span>?&#8288;list:bool</span> <span>&#45;&gt;</span> <span>?&#8288;include_deleted:bool</span> <span>&#45;&gt;</span> <span>?&#8288;rev:string</span> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;include_media_info:bool</span> <span>&#45;&gt;</span> <span>?&#8288;include_membership:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-metadata">metadata</a> option</span> Lwt.t</span></code></dt><dd><p><code>metadata t path</code> return the metadata for the file or the folder <code>path</code>. A return value of <code>None</code> means that the file does not exists.</p><dl><dt>parameter file_limit</dt><dd><p>Default is 10,000 (max is 25,000). When listing a folder, the service won't report listings containing more than the specified amount of files and will instead respond with a <code>Not_Acceptable</code> error.</p></dd></dl><dl><dt>parameter hash</dt><dd><p>Each call to <a href="index.html#type-metadata"><code>metadata</code></a> on a folder will return a hash field, generated by hashing all of the metadata contained in that response. On later calls to <a href="index.html#type-metadata"><code>metadata</code></a>, you should provide that value via this parameter so that if nothing has changed, the response will be <code>Not Modified</code> status code instead of the full, potentially very large, folder listing. This parameter is ignored if the specified path is associated with a file or if <code>list=false</code>.</p></dd></dl><dl><dt>parameter list</dt><dd><p>If <code>true</code>, the folder's metadata will include a contents field with a list of metadata entries for the contents of the folder. If <code>false</code>, the contents field will be empty. Default: <code>true</code>.</p></dd></dl><dl><dt>parameter include_deleted</dt><dd><p>Only applicable when list is set. If this parameter is set to <code>true</code>, then contents will include the metadata of deleted children. Note that the target of the metadata call is always returned even when it has been deleted (with <code>is_deleted</code> set to <code>true</code>) regardless of this flag.</p></dd></dl><dl><dt>parameter rev</dt><dd><p>If you include a particular revision number, then only the metadata for that revision will be returned.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>The metadata returned will have its size field translated based on the given locale. For more information see the <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a>.</p></dd></dl><dl><dt>parameter include_media_info</dt><dd><p>If <code>true</code>, each file will include a <a href="index.html#type-photo_info"><code>photo_info</code></a> record for photos and a <a href="index.html#type-video_info"><code>video_info</code></a> record for videos with additional media info. If the data isn't available yet, the string pending will be returned instead of a dictionary.</p></dd></dl><dl><dt>parameter include_membership</dt><dd><p>If <code>true</code>, metadata for a shared folder will include a list of members and a list of groups.</p><p>Possible errors: Not_modified The folder contents have not changed (relies on hash parameter). Not_acceptable There are too many file entries to return.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-delta"><a href="#val-delta" class="anchor"></a><code><span class="keyword">val</span> delta : <span>?&#8288;cursor:<a href="index.html#type-cursor">cursor</a></span> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;path_prefix:string</span> <span>&#45;&gt;</span> <span>?&#8288;include_media_info:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-delta">delta</a> Lwt.t</span></code></dt><dd><p><code>delta t</code> return the delta. This is a way of letting you keep up with changes to files and folders in a user's Dropbox. Deltas are instructions on how to update your local state to match the server's state.</p><dl><dt>parameter cursor</dt><dd><p>A value that is used to keep track of your current state. On the next call pass in this value to return delta entries that have been recorded since the cursor was returned.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See the <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl><dl><dt>parameter path_prefix</dt><dd><p>If present, this parameter filters the response to only include entries at or under the specified path. For example, a <code>path_prefix</code> of <code>&quot;/Photos/Vacation&quot;</code> will return entries for the path &quot;/Photos/Vacation&quot; and any files and folders under that path. If <code>cursor</code> is set, <code>path_prefix</code> is interpreted as the sub-path of the <code>path_prefix</code> used to create the cursor. For example if your cursor has no <code>path_prefix</code>, you can switch to any <code>path_prefix</code>. If your cursor has a <code>path_prefix</code> of <code>&quot;/Photos&quot;</code>, then setting <code>path_prefix =
      &quot;/Vacaction&quot;</code> will switch the path for this request to &quot;/Photos/Vacaction&quot;.</p></dd></dl><dl><dt>parameter include_media_info</dt><dd><p>If true (default is <code>false</code>), each file will include a <code>photo_info</code> record for photos and a <code>video_info</code> record for videos with additional media info. When <code>include_media_info</code> is specified, files will only appear in delta responses when the media info is ready. This parameter is ignored when you use a <code>cursor</code> (the Dropbox API mandates that the value set at the creation of the cursor is used).</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-latest_cursor"><a href="#val-latest_cursor" class="anchor"></a><code><span class="keyword">val</span> latest_cursor : <span>?&#8288;path_prefix:string</span> <span>&#45;&gt;</span> <span>?&#8288;include_media_info:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><a href="index.html#type-cursor">cursor</a> Lwt.t</span></code></dt><dd><p><code>latest_cursor t</code> return a cursor (as would be returned by <a href="index.html#type-delta"><code>delta</code></a> when <code>has_more</code> is <code>false</code>).</p><dl><dt>parameter path_prefix</dt><dd><p>If present, the returned cursor will be encoded with a <code>path_prefix</code> for the specified path for use with <a href="index.html#type-delta"><code>delta</code></a>.</p></dd></dl><dl><dt>parameter include_media_info</dt><dd><p>If <code>true</code>, the returned cursor will be encoded with <code>include_media_info</code> set to <code>true</code> for use with <a href="index.html#type-delta"><code>delta</code></a>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-longpoll_delta"><a href="#val-longpoll_delta" class="anchor"></a><code><span class="keyword">val</span> longpoll_delta : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;timeout:int</span> <span>&#45;&gt;</span> <a href="index.html#type-cursor">cursor</a> <span>&#45;&gt;</span> <span><a href="index.html#type-longpoll_delta">longpoll_delta</a> Lwt.t</span></code></dt><dd><p><code>longpoll_delta t cursor</code> blocks the connection until changes are available or a timeout occurs. In both case, a value <code>r</code> will be returned with <code>r.changes</code> indicating whether new changes are available. If this is the case, you should call <a href="index.html#type-delta"><code>delta</code></a> to retrieve the changes. If this value is <code>false</code>, it means the call to <a href="index.html#type-longpoll_delta"><code>longpoll_delta</code></a> timed out. In conjunction with <a href="index.html#type-delta"><code>delta</code></a>, this call gives you a low-latency way to monitor an account for file changes.</p><p>The <code>cursor</code> is a crusor returned from a call to <a href="index.html#type-delta"><code>delta</code></a>. Note that a cursor returned from a call to <a href="index.html#type-delta"><code>delta</code></a> with <code>include_media_info=true</code> is incompatible with <a href="index.html#type-longpoll_delta"><code>longpoll_delta</code></a> and an error will be returned.</p><dl><dt>parameter timeout</dt><dd><p>An integer indicating a timeout, in seconds. The default value is 30 seconds, which is also the minimum allowed value. The maximum is 480 seconds. The request will block for at most this length of time, plus up to 90 seconds of random jitter added to avoid the thundering herd problem. Care should be taken when using this parameter, as some network infrastructure does not support long timeouts.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-revisions"><a href="#val-revisions" class="anchor"></a><code><span class="keyword">val</span> revisions : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;rev_limit:int</span> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span><a href="index.html#type-metadata">metadata</a> list</span> option</span> Lwt.t</span></code></dt><dd><p><code>revisions t name</code> Return the metadata for the previous revisions of a file (in a list of metadata). Only revisions up to thirty days old are available. A return value of <code>None</code> means that the file does not exist.</p><dl><dt>parameter rev_limit</dt><dd><p>Default is 10. Max is 1,000. Up to this number of recent revisions will be returned.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-restore"><a href="#val-restore" class="anchor"></a><code><span class="keyword">val</span> restore : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>rev:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-metadata">metadata</a> option</span> Lwt.t</span></code></dt><dd><p><code>restore t rev name</code> Restores the file path <code>name</code> to the previous revision <code>rev</code>. Return the metadata of the restored file. A return value of <code>None</code> means that there is no file path <code>name</code> with such <code>rev</code>.</p><p>If the revision is not well formed or non-existing, the function will fail throwing <code>Error Dropbox.Invalid_arg</code>.</p><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-search"><a href="#val-search" class="anchor"></a><code><span class="keyword">val</span> search : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;file_limit:int</span> <span>&#45;&gt;</span> <span>?&#8288;include_deleted:bool</span> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;include_membership:bool</span> <span>&#45;&gt;</span> <span>?&#8288;fn:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-metadata">metadata</a> list</span> Lwt.t</span></code></dt><dd><p><code>search query</code> return the list containing the metadata for all files and folders whose filename contains the given search string as a substring.</p><dl><dt>parameter path</dt><dd><p>The path to the folder you want to search from. Must be written entirely.</p></dd></dl><dl><dt>parameter query</dt><dd><p>The search string. This string is split (on spaces) into individual words. Files and folders will be returned if they contain all words in the search string.</p></dd></dl><dl><dt>parameter file_limit</dt><dd><p>The maximum and default value is 1,000. No more than <code>file_limit</code> search results will be returned.</p></dd></dl><dl><dt>parameter include_deleted</dt><dd><p>If this parameter is set to <code>true</code>, then files and folders that have been deleted will also be included in the search. Default: <code>false</code>.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl><dl><dt>parameter include_membership</dt><dd><p>If <code>true</code>, metadata for a shared folder will include a list of members and a list of groups. Default: <code>false</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-copy_ref"><a href="#val-copy_ref" class="anchor"></a><code><span class="keyword">val</span> copy_ref : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-copy_ref">copy_ref</a> option</span> Lwt.t</span></code></dt><dd><p><code>copy_ref t fname</code> creates and return a <code>copy_ref</code> to the file or directory <code>fname</code>. A return value of <code>None</code> means that <code>fname</code> does not exist. <a href="index.html#type-copy_ref"><code>copy_ref</code></a> can be used to copy that file to another user's Dropbox by passing it in as the <code>from_copy_ref</code> parameter on <a href="index.html#val-copy"><code>copy</code></a>. All links are currently set to expire far enough in the future so that expiration is effectively not an issue.</p></dd></dl><dl><dt class="spec type" id="type-visibility"><a href="#type-visibility" class="anchor"></a><code><span class="keyword">type</span> visibility</code> = <code>[ </code><table class="variant"><tr id="type-visibility.Public" class="anchored"><td class="def constructor"><a href="#type-visibility.Public" class="anchor"></a><code>| </code><code>`Public</code></td></tr><tr id="type-visibility.Team_only" class="anchored"><td class="def constructor"><a href="#type-visibility.Team_only" class="anchor"></a><code>| </code><code>`Team_only</code></td></tr><tr id="type-visibility.Password" class="anchored"><td class="def constructor"><a href="#type-visibility.Password" class="anchor"></a><code>| </code><code>`Password</code></td></tr><tr id="type-visibility.Team_and_password" class="anchored"><td class="def constructor"><a href="#type-visibility.Team_and_password" class="anchor"></a><code>| </code><code>`Team_and_password</code></td></tr><tr id="type-visibility.Shared_folder_only" class="anchored"><td class="def constructor"><a href="#type-visibility.Shared_folder_only" class="anchor"></a><code>| </code><code>`Shared_folder_only</code></td></tr><tr id="type-visibility.Other" class="anchored"><td class="def constructor"><a href="#type-visibility.Other" class="anchor"></a><code>| </code><code>`Other <span class="keyword">of</span> string</code></td></tr></table><code> ]</code></dt><dd><p>The visibility of a <code>shared_link</code>.</p></dd></dl><dl><dt class="spec type" id="type-shared_link"><a href="#type-shared_link" class="anchor"></a><code><span class="keyword">type</span> shared_link</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-shared_link">Dropbox_t.shared_link</a></code><code> = </code><code>{</code><table class="record"><tr id="type-shared_link.url" class="anchored"><td class="def field"><a href="#type-shared_link.url" class="anchor"></a><code>url : string;</code></td><td class="doc"><p>The link URL to the file or directory</p></td></tr><tr id="type-shared_link.expires" class="anchored"><td class="def field"><a href="#type-shared_link.expires" class="anchor"></a><code>expires : <a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a>;</code></td><td class="doc"><p>The link's expiration date</p></td></tr><tr id="type-shared_link.visibility" class="anchored"><td class="def field"><a href="#type-shared_link.visibility" class="anchor"></a><code>visibility : <a href="index.html#type-visibility">visibility</a>;</code></td><td class="doc"><p>Dropbox for Business users can set restrictions on shared links; the visibility field indicates what (if any) restrictions are set on this particular link. Possible values include: <code>`Public</code> (anyone can view), <code>`Team_only</code> (only the owner's team can view), <code>`Password</code> (a password is required), <code>`Team_and_password</code> (a combination of <code>`Team_only</code> and <code>`Password</code> restrictions), or <code>`Shared_folder_only</code> (only members of the enclosing shared folder can view). Note that Dropbox says that other values may be added at any time (these will be captured by <code>`Other</code>).</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-shares"><a href="#val-shares" class="anchor"></a><code><span class="keyword">val</span> shares : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;short_url:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-shared_link">shared_link</a> option</span> Lwt.t</span></code></dt><dd><p><code>shares t path</code> return a <code>shared_link</code> to a file or folder. A return value of <code>None</code> means that the file does not exist.</p><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See the <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl><dl><dt>parameter short_url</dt><dd><p>When <code>true</code> (default), the URL returned will be shortened using the Dropbox URL shortener. If <code>false</code>, the URL will link directly to the file's preview page.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-link"><a href="#type-link" class="anchor"></a><code><span class="keyword">type</span> link</code><code> = <a href="../../dropbox/Dropbox_t/index.html#type-link">Dropbox_t.link</a></code><code> = </code><code>{</code><table class="record"><tr id="type-link.url" class="anchored"><td class="def field"><a href="#type-link.url" class="anchor"></a><code>url : string;</code></td><td class="doc"><p>The link URL to the file</p></td></tr><tr id="type-link.expires" class="anchored"><td class="def field"><a href="#type-link.expires" class="anchor"></a><code>expires : <a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a>;</code></td><td class="doc"><p>The link's expiration date</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-media"><a href="#val-media" class="anchor"></a><code><span class="keyword">val</span> media : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><a href="index.html#type-link">link</a> option</span> Lwt.t</span></code></dt><dd><p><code>media t path</code> return a <code>link</code> directly to a file. A return value of <code>None</code> means that the file does not exist.</p><p>Similar to <a href="index.html#val-shares"><code>shares</code></a>. The difference is that this bypasses the Dropbox webserver, used to provide a preview of the file, so that you can effectively stream the contents of your media. This URL should not be used to display content directly in the browser.</p><p>Note that the <a href="index.html#val-media"><code>media</code></a> link expires after four hours, allotting enough time to stream files, but not enough to leave a connection open indefinitely.</p><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-shared_folders"><a href="#val-shared_folders" class="anchor"></a><code><span class="keyword">val</span> shared_folders : <span>?&#8288;shared_folder_id:string</span> <span>&#45;&gt;</span> <span>?&#8288;include_membership:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span><span><a href="index.html#type-shared_folder">shared_folder</a> list</span> Lwt.t</span></code></dt><dd><p><code>shared_folder t</code> Return the metadata about a specific shared folder or the list of all shared folders the authenticated user has access to if <code>shared_folder_id</code> is not specified.</p><dl><dt>parameter shared_folder</dt><dd><p>The ID of a specific shared folder.</p></dd></dl><dl><dt>parameter include_membership</dt><dd><p>If <code>true</code> (the default), include a list of members and a list of groups for the shared folder.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-files_put"><a href="#val-files_put" class="anchor"></a><code><span class="keyword">val</span> files_put : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;overwrite:bool</span> <span>&#45;&gt;</span> <span>?&#8288;parent_rev:string</span> <span>&#45;&gt;</span> <span>?&#8288;autorename:bool</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span>[ <span>`String of string</span> <span><span>| `Strings</span> of <span>string list</span></span> <span><span>| `Stream</span> of <span>string Lwt_stream.t</span></span> <span><span>| `Stream_len</span> of <span>string Lwt_stream.t</span> * int</span> ]</span> <span>&#45;&gt;</span> <span><a href="index.html#type-metadata">metadata</a> Lwt.t</span></code></dt><dd><p><code>files_put t path content</code> upload the <code>content</code> under the <code>path</code> (the full path is created by Dropbox if necessary) and return the metadata of the uploaded file. The <code>path</code> should not point to a folder.</p><dl><dt>parameter locale</dt><dd><p>The metadata returned on successful upload will have its size field translated based on the given locale.</p></dd></dl><dl><dt>parameter overwrite</dt><dd><p>This value determines whether an existing file will be overwritten by this upload. If <code>true</code> (the default), any existing file will be overwritten. If <code>false</code>, the other parameters determine whether a conflict occurs and how that conflict is resolved.</p></dd></dl><dl><dt>parameter parent_rev</dt><dd><p>If present, this parameter specifies the revision of the file you're editing. If parent_rev matches the latest version of the file on the user's Dropbox, that file will be replaced. Otherwise, a <code>Conflict</code> will occur. If you specify a parent_rev and that revision doesn't exist, the file won't save (this function will fail with <code>Invalid_arg</code>). You can get the most recent revision by performing a call to <a href="index.html#type-metadata"><code>metadata</code></a>.</p></dd></dl><dl><dt>parameter autorename</dt><dd><p>This value determines what happens when there is a conflict. If <code>true</code> (the default), the file being uploaded will be automatically renamed to avoid the conflict. (For example, test.txt might be automatically renamed to testÂ (1).txt.) The new name can be obtained from the returned metadata. If <code>false</code>, the call will fail with a <code>Conflict</code> error.</p><p>Possible errors: Fail with <code>Conflict</code> if a conflict occurred. This means a file already existed at the specified path, <code>overwrite</code> was <code>false</code>, and the <code>parent_rev</code> (if specified) didn't match the current rev.</p><p>Fail with <code>Invalid_arg</code> Returned if the request does not contain an <code>upload_id</code> or if there is no chunked upload matching the given <code>upload_id</code>.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-chunked_upload_id"><a href="#type-chunked_upload_id" class="anchor"></a><code><span class="keyword">type</span> chunked_upload_id</code><code> = <span class="keyword">private</span> string</code></dt><dt class="spec type" id="type-chunked_upload"><a href="#type-chunked_upload" class="anchor"></a><code><span class="keyword">type</span> chunked_upload</code><code> = </code><code>{</code><table class="record"><tr id="type-chunked_upload.id" class="anchored"><td class="def field"><a href="#type-chunked_upload.id" class="anchor"></a><code>id : <a href="index.html#type-chunked_upload_id">chunked_upload_id</a>;</code></td><td class="doc"><p>The ID of the in-progress upload.</p></td></tr><tr id="type-chunked_upload.ofs" class="anchored"><td class="def field"><a href="#type-chunked_upload.ofs" class="anchor"></a><code>ofs : int;</code></td><td class="doc"><p>The byte offset for the next chunk.</p></td></tr><tr id="type-chunked_upload.expires" class="anchored"><td class="def field"><a href="#type-chunked_upload.expires" class="anchor"></a><code>expires : <a href="../../dropbox/Dropbox/Date/index.html#type-t">Dropbox.Date.t</a>;</code></td><td class="doc"><p>The time limit to finish the upload.</p></td></tr></table><code>}</code></dt></dl><dl><dt class="spec value" id="val-chunked_upload"><a href="#val-chunked_upload" class="anchor"></a><code><span class="keyword">val</span> chunked_upload : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;id:<a href="index.html#type-chunked_upload_id">chunked_upload_id</a></span> <span>&#45;&gt;</span> <span>?&#8288;ofs:int</span> <span>&#45;&gt;</span> <span>[ <span>`String of string</span> <span><span>| `Strings</span> of <span>string list</span></span> <span><span>| `Stream</span> of <span>string Lwt_stream.t</span></span> ]</span> <span>&#45;&gt;</span> <span><a href="index.html#type-chunked_upload">chunked_upload</a> Lwt.t</span></code></dt><dd><p><code>chunked_upload chunk</code> upload the <code>chunk</code> and return the ID and offset for the subsequent upload of the same file. This allows to upload large files to Dropbox (larger than 150Mb which is the limit for <a href="index.html#val-files_put"><code>files_put</code></a>). Chunks can be any size up to 150 MB. A typical chunk is 4 MB. Using large chunks will mean fewer calls to <a href="index.html#type-chunked_upload"><code>chunked_upload</code></a> and faster overall throughput. However, whenever a transfer is interrupted, you will have to resume at the beginning of the last chunk, so it is often safer to use smaller chunks.</p><dl><dt>parameter id</dt><dd><p>The unique ID of the in-progress upload on the server. If not set, the server will create a new upload session.</p></dd></dl><dl><dt>parameter ofs</dt><dd><p>The byte offset of this chunk, relative to the beginning of the full file. The server will verify that this matches the offset it expects. If it does not, <a href="index.html#type-chunked_upload"><code>chunked_upload</code></a> will fail with an <code>Invalid_arg</code> error.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-commit_chunked_upload"><a href="#val-commit_chunked_upload" class="anchor"></a><code><span class="keyword">val</span> commit_chunked_upload : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;overwrite:bool</span> <span>&#45;&gt;</span> <span>?&#8288;parent_rev:string</span> <span>&#45;&gt;</span> <span>?&#8288;autorename:bool</span> <span>&#45;&gt;</span> <a href="index.html#type-chunked_upload_id">chunked_upload_id</a> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><a href="index.html#type-metadata">metadata</a> Lwt.t</span></code></dt><dd><p><code>commit_chunked_upload upload_id path</code> complete the upload initiated by <a href="index.html#type-chunked_upload"><code>chunked_upload</code></a>. Save the uploaded data under <code>path</code> and return the metadata for the uploaded file using chunked_upload. <code>upload_id</code> is used to identify the chunked upload session you'd like to commit.</p><dl><dt>parameter locale</dt><dd><p>The metadata returned on successful upload will have its size field translated based on the given locale.</p></dd></dl><dl><dt>parameter overwrite</dt><dd><p>This value, either <code>true</code> (default) or <code>false</code>, determines whether an existing file will be overwritten by this upload. If <code>true</code>, any existing file will be overwritten. If <code>false</code>, the other parameters determine whether a conflict occurs and how that conflict is resolved.</p></dd></dl><dl><dt>parameter parent_rev</dt><dd><p>If present, this parameter specifies the <code>revision</code> of the file you're editing. If parent_rev matches the latest version of the file on the user's Dropbox, that file will be replaced. Otherwise, a conflict will occur. (See below.) If you specify a parent_rev and that <code>revision</code> doesn't exist, the file won't save. You can get the most recent rev by performing a call to <code>metadata</code>.</p></dd></dl><dl><dt>parameter autorename</dt><dd><p>This value, either <code>true</code> (default) or <code>false</code>, determines what happens when there is a conflict. If <code>true</code>, the file being uploaded will be automatically renamed to avoid the conflict. (For example, test.txt might be automatically renamed to testÂ (1).txt.) The new name can be obtained from the returned metadata. If <code>false</code>, the call will fail with a Conflict response code.</p><p>Possible errors: Fail with <code>Conflict</code> if a conflict occurred. This means a file already existed at the specified path, <code>overwrite</code> was <code>false</code>, and the <code>parent_rev</code> (if specified) didn't match the current rev.</p><p>Fail with <code>Invalid_arg</code> if there is no chunked upload matching the given <code>upload_id</code>.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-thumbnails"><a href="#val-thumbnails" class="anchor"></a><code><span class="keyword">val</span> thumbnails : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;format:<span>[ `Jpeg <span>| `Png</span> <span>| `Bmp</span> ]</span></span> <span>&#45;&gt;</span> <span>?&#8288;size:<span>[ `Xs <span>| `S</span> <span>| `M</span> <span>| `L</span> <span>| `Xl</span> ]</span></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span>(<a href="index.html#type-metadata">metadata</a> * <span>string Lwt_stream.t</span>)</span> option</span> Lwt.t</span></code></dt><dd><p><code>thumbnails t path</code> return the metadata for the thumbnails of <code>path</code> and a stream of the content of the thumbnails. <code>None</code> indicates that the <code>path</code> does not exists or is not an image.</p><p>Note that This method currently supports files with the following file extensions: .jpg, .jpeg, .png, .tiff, .tif, .gif, .bmp (it also work on .avi, .mp4, .flv). And photos larger than 20MB in size won't be converted to a thumbnail.</p><dl><dt>parameter format</dt><dd><p><code>`Jpeg</code> (default) or <code>`Png</code>. For images that are photos, <code>`Jpeg</code> should be preferred, while <code>`Png</code> is better for screenshots and digital art. Support also <code>`Bmp</code>.</p></dd></dl><dl><dt>parameter size</dt><dd><p>The size of the thumbnail (default: <code>`S</code>): <code>`Xs</code> (32x32), <code>`S</code> (64x64), <code>`M</code> (128x128), <code>`L</code> (640x480), <code>`Xl</code> (1024x768). The image returned may be larger or smaller than the size requested, depending on the size and aspect ratio of the original image.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-previews"><a href="#val-previews" class="anchor"></a><code><span class="keyword">val</span> previews : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;rev:string</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span><span>(string * string * <span>string Lwt_stream.t</span>)</span> option</span> Lwt.t</span></code></dt><dd><p><code>previews t path</code> Returns a 3-uple which contains the Content-Type whose values are <code>&quot;application/pdf&quot;</code> or <code>&quot;text/html&quot;</code>, the Original-Content-Length which is the size of the preview data and the stream of its content. Return <code>None</code> when the file wasn't found the specified path, or wasn't found at the specified <code>rev</code>.</p><p>Note previews are only generated for the files with the following extensions: .doc, .docx, .docm, .ppt, .pps, .ppsx, .ppsm, .pptx, .pptm, .xls, .xlsx, .xlsm, .rtf.</p><dl><dt>parameter rev</dt><dd><p>The revision of the file to retrieve. This defaults to the most recent revision.</p></dd></dl></dd></dl><section><header><h3 id="fileops"><a href="#fileops" class="anchor"></a>File Operations</h3></header><dl><dt class="spec type" id="type-root"><a href="#type-root" class="anchor"></a><code><span class="keyword">type</span> root</code> = <code>[ </code><table class="variant"><tr id="type-root.Auto" class="anchored"><td class="def constructor"><a href="#type-root.Auto" class="anchor"></a><code>| </code><code>`Auto</code></td></tr><tr id="type-root.Dropbox" class="anchored"><td class="def constructor"><a href="#type-root.Dropbox" class="anchor"></a><code>| </code><code>`Dropbox</code></td></tr><tr id="type-root.Sandbox" class="anchored"><td class="def constructor"><a href="#type-root.Sandbox" class="anchor"></a><code>| </code><code>`Sandbox</code></td></tr></table><code> ]</code></dt></dl><dl><dt class="spec value" id="val-copy"><a href="#val-copy" class="anchor"></a><code><span class="keyword">val</span> copy : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;root:<a href="index.html#type-root">root</a></span> <span>&#45;&gt;</span> <span>[ <span>`From_path of string</span> <span><span>| `From_copy_ref</span> of string</span> ]</span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>[ <span>`Some of <a href="index.html#type-metadata">metadata</a></span> <span>| `None</span> <span><span>| `Invalid</span> of string</span> <span>| `Too_many_files</span> ]</span> Lwt.t</span></code></dt><dd><p><code>copy t source to_path</code> copy the file or folder. The <code>source</code> can either be:</p><ul><li><code>`From_path</code>: specifies the file or folder to be copied from relative to the root;</li><li><code>`From_copy_ref</code>: specifies a <code>copy_ref</code> generated from a previous <a href="index.html#type-copy_ref"><code>copy_ref</code></a> call.</li></ul><p>The second argument <code>to_path</code> specifies the destination path, including the new name for the file or folder, relative to <code>root</code>. If everything goes well, the metadata of the copy is returned.</p><ul><li><code>`None</code> means that the <code>source</code> was not found.</li><li><code>`Invalid</code> is returned when there is already a file at the given destination, or one is trying to copy a shared folder</li><li><code>`Too_many_files</code> is returned when too many files would be involved in the operation for it to complete successfully. The limit is currently 10,000 files and folders.</li></ul><dl><dt>parameter root</dt><dd><p>The root relative to which <code>from_path</code> and <code>to_path</code> are specified. Valid values are `Auto (default), `Sandbox, and `Dropbox.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-create_folder"><a href="#val-create_folder" class="anchor"></a><code><span class="keyword">val</span> create_folder : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;root:<a href="index.html#type-root">root</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>[ <span>`Some of <a href="index.html#type-metadata">metadata</a></span> <span><span>| `Invalid</span> of string</span> ]</span> Lwt.t</span></code></dt><dd><p><code>create_folder path</code> create the folder <code>path</code> (interpreted relatively to <code>root</code>) and return the metadata for the new folder. Return <code>`Invalid</code> if <code>path</code> already exists.</p><dl><dt>parameter root</dt><dd><p>The root relative to which path is specified. Valid values are <code>`Auto</code> (default), <code>`Sandbox</code>, and <code>`Dropbox</code>.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-delete"><a href="#val-delete" class="anchor"></a><code><span class="keyword">val</span> delete : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;root:<a href="index.html#type-root">root</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>[ <span>`Some of <a href="index.html#type-metadata">metadata</a></span> <span>| `None</span> <span>| `Too_many_files</span> ]</span> Lwt.t</span></code></dt><dd><p><code>delete path</code> delete the file or folder <code>path</code> and return the metadata of it. Return <code>`None</code> if <code>path</code> does not exist and <code>`Too_many_files</code> when too many files would be involved in the operation for it to complete successfully. The limit is currently 10,000 files and folders.</p><dl><dt>parameter root</dt><dd><p>The root relative to which path is specified. Valid values are <code>`Auto</code> (default), <code>`Sandbox</code>, and <code>`Dropbox</code>.</p></dd></dl><dl><dt>parameter path</dt><dd><p>The path to the file or folder to be deleted.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl><dl><dt class="spec value" id="val-move"><a href="#val-move" class="anchor"></a><code><span class="keyword">val</span> move : <a href="index.html#type-t">t</a> <span>&#45;&gt;</span> <span>?&#8288;locale:string</span> <span>&#45;&gt;</span> <span>?&#8288;root:<a href="index.html#type-root">root</a></span> <span>&#45;&gt;</span> string <span>&#45;&gt;</span> string <span>&#45;&gt;</span> <span><span>[ <span>`Some of <a href="index.html#type-metadata">metadata</a></span> <span>| `None</span> <span><span>| `Invalid</span> of string</span> <span>| `Too_many_files</span> ]</span> Lwt.t</span></code></dt><dd><p><code>move from_path to_path</code> move the file or folder <code>from_path</code> to <code>to_path</code>. If everything goes well, the metadata of the moved file is returned.</p><ul><li><code>`None</code> means that the <code>from_path</code> does not exist.</li><li><code>`Invalid</code> is returned when there is already a file at the given destination, or one tries to move a shared folder into a shared folder.</li><li><code>`Too_many_files</code> is returned when too many files would be involved in the operation for it to complete successfully. The limit is currently 10,000 files and folders.</li></ul><dl><dt>parameter root</dt><dd><p>The root relative to which from_path and to_path are specified.</p></dd></dl><dl><dt>parameter locale</dt><dd><p>Specify language settings for user error messages and other language specific text. See <a href="https://www.dropbox.com/developers/core/docs#param.locale">Dropbox documentation</a> for more information about supported locales.</p></dd></dl></dd></dl></section></details></div></div></div></div></body></html>