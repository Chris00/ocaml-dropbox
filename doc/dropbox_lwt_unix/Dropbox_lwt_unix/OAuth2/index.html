<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>OAuth2 (dropbox_lwt_unix.Dropbox_lwt_unix.OAuth2)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> – <a href="../../index.html">dropbox_lwt_unix</a> &#x00BB; <a href="../index.html">Dropbox_lwt_unix</a> &#x00BB; OAuth2</nav><h1>Module <code>Dropbox_lwt_unix.OAuth2</code></h1><p><a href="http://oauth.net/">OAuth 2.0</a> authentication.</p></header><dl><dt class="spec value" id="val-authorize"><a href="#val-authorize" class="anchor"></a><code><span class="keyword">val</span> authorize : <span>?&#8288;state:string</span> <span>&#45;&gt;</span> <span>?&#8288;force_reapprove:bool</span> <span>&#45;&gt;</span> <span>?&#8288;disable_signup:bool</span> <span>&#45;&gt;</span> <span>id:string</span> <span>&#45;&gt;</span> <span>[ <span>`Token of Uri.t</span> <span><span>| `Code</span> of <span>Uri.t option</span></span> ]</span> <span>&#45;&gt;</span> Uri.t</code></dt><dd><p><code>authorize client_id response</code> starts the OAuth 2.0 authorization flow. This isn't an API call—it's the web page that lets the user sign in to Dropbox and authorize your app. The <code>client_id</code> is the app's key, found in the <a href="https://www.dropbox.com/developers/apps">App Console</a>. After the user authorizes your app, they will be sent to your redirect URI. The type of response varies based on the <code>response</code>:</p><ul><li><code>`Token redirect_uri</code> (also called &quot;implicit grant&quot;) returns the bearer token by redirecting the user to <code>redirect_uri</code> after the authorization has completed. Extract the token using <a href="index.html#val-token_of_uri"><code>token_of_uri</code></a>. This is useful for pure client-side apps, such as mobile apps or JavaScript-based apps.</li></ul><ul><li><code>`Code u</code> if <code>u = Some redirect_uri</code>, returns a code via by redirecting the user to <code>redirect_uri</code> (extract the code using <a href="index.html#val-code_of_uri"><code>code_of_uri</code></a>) or, if <code>u = None</code>, presents the code to use user (on screen) who will be invited to copy it in your app. The code should then be converted into a bearer token using <a href="index.html#type-token"><code>OAuth2.token</code></a>. This is recommended for apps that are running on a server.</li></ul><p>Note that the URI for <code>`Token</code> and <code>`Code</code> must be registered in the <a href="https://www.dropbox.com/developers/apps">App Console</a>; even 'localhost' must be listed if it is used for testing.</p><dl><dt>parameter state</dt><dd><p>Up to 200 bytes of arbitrary data that will be passed back to your redirect URI. This parameter should be used to protect against cross-site request forgery (CSRF). See Sections <a href="http://tools.ietf.org/html/rfc6819#section-4.4.1.8">4.4.1.8</a> and <a href="http://tools.ietf.org/html/rfc6819#section-4.4.2.5">4.4.2.5</a> of the OAuth 2.0 threat model spec.</p></dd></dl><dl><dt>parameter force_reapprove</dt><dd><p>Whether or not to force the user to approve the app again if they've already done so. If <code>false</code> (default), a user who has already approved the application may be automatically redirected to the URI specified by <code>redirect_uri</code>. If <code>true</code>, the user will not be automatically redirected and will have to approve the app again.</p></dd></dl><dl><dt>parameter disable_signup</dt><dd><p>When <code>true</code> (default is <code>false</code>) users will not be able to sign up for a Dropbox account via the authorization page. Instead, the authorization page will show a link to the Dropbox iOS app in the App Store. This is only intended for use when necessary for compliance with App Store policies.</p></dd></dl></dd></dl><dl><dt class="spec type" id="type-code"><a href="#type-code" class="anchor"></a><code><span class="keyword">type</span> code</code><code> = string</code></dt><dd><p>The authorization code, which can be used to attain a bearer token by calling <a href="index.html#type-token"><code>token</code></a>.</p></dd></dl><dl><dt class="spec value" id="val-code_of_uri"><a href="#val-code_of_uri" class="anchor"></a><code><span class="keyword">val</span> code_of_uri : Uri.t <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-code">code</a> * string)</span> option</span></code></dt><dd><p><code>code_of_uri u</code> return the code and state from the redirect URI <code>u</code> after a <code>`Code</code> authorization.</p></dd></dl><dl><dt class="spec type" id="type-token"><a href="#type-token" class="anchor"></a><code><span class="keyword">type</span> token</code><code> = string</code></dt></dl><dl><dt class="spec value" id="val-token_of_uri"><a href="#val-token_of_uri" class="anchor"></a><code><span class="keyword">val</span> token_of_uri : Uri.t <span>&#45;&gt;</span> <span><span>(<a href="index.html#type-token">token</a> * string)</span> option</span></code></dt><dd><p><code>token_of_uri u</code> parse the URI coming from a <code>`Token</code> flow and extract the token and state.</p></dd></dl><dl><dt class="spec value" id="val-token"><a href="#val-token" class="anchor"></a><code><span class="keyword">val</span> token : <span>?&#8288;redirect_uri:Uri.t</span> <span>&#45;&gt;</span> <a href="index.html#type-code">code</a> <span>&#45;&gt;</span> <span>id:string</span> <span>&#45;&gt;</span> <span>secret:string</span> <span>&#45;&gt;</span> <span><a href="index.html#type-token">token</a> Lwt.t</span></code></dt><dd><p><code>token code id secret</code> acquire a token once the user has authorized the app. Only applies to apps using the authorization <code>`Code</code> flow.</p><p><code>code</code> is the code acquired by directing users to <code>OAuth2.authorize ~response_type:`Code</code>.</p><p><code>id</code> this should be the app's key (found in the <a href="https://www.dropbox.com/developers/apps">App Console</a>).</p><p><code>secret</code> this parameter should be present and should be the app's secret.</p><dl><dt>parameter redirect_uri</dt><dd><p>Only used to validate that it matches the original <a href="index.html#val-authorize"><code>authorize</code></a>, not used to redirect again.</p></dd></dl></dd></dl></div></body></html>